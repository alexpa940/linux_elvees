# SPDX-License-Identifier: GPL-2.0+
%YAML 1.2
---
$id: http://devicetree.org/schemas/pinctrl/elvees,pinctrl-mcom03-lsperiph.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Pin controller for LSPERIPH0/1 subsystems in ELVEES MCom-03 SoC

maintainers:
  - Omar Al-Wadi <oalwadi@elvees.com>

properties:
  compatible:
    oneOf:
      - items:
          - const: elvees,mcom03-lsperiph0-pinctrl
      - items:
          - const: elvees,mcom03-lsperiph1-pinctrl

  elvees,urb:
    $ref: /schemas/types.yaml#/definitions/phandle
    description:
      A phandle to the syscon node describing URB registers.
  '#address-cells':
    const: 0
  '#size-cells':
    const: 0

required:
  - compatible
  - elvees,urb
  - '#address-cells'
  - '#size-cells'

patternProperties:
  "^(uart[1-3]|spi0|i2c0).*-cfg$":
    type: object
    description: |
      Config nodes for LSPERIPH0 pinctrl.
    patternProperties:
      ".*-(pins|pin)$":
        type: object
        properties:
          pins:
            items:
              oneOf:
                - enum: [GPIOA_0, GPIOA_1, GPIOA_2, GPIOA_3,
                         GPIOA_4, GPIOA_5, GPIOA_6, GPIOA_7,
                         GPIOB_0, GPIOB_1, GPIOB_2, GPIOB_3,
                         GPIOB_4, GPIOB_5, GPIOB_6, GPIOB_7,
                         GPIOC_0, GPIOC_1, GPIOC_2, GPIOC_3,
                         GPIOC_4, GPIOC_5, GPIOC_6, GPIOC_7,
                         GPIOD_0, GPIOD_1, GPIOD_2, GPIOD_3,
                         GPIOD_4, GPIOD_5, GPIOD_6, GPIOD_7]
            minItems: 1
            maxItems: 13 # Maximum pins(depends on uart3) number per one config.
          bias-disable:
            $ref: pincfg-node.yaml#/properties/bias-disable
            default: false
          bias-pull-up:
            $ref: pincfg-node.yaml#/properties/bias-pull-up
            default: true
        additionalProperties: false

  "^(i2c[1-3]|i2s0|uart0|ss1|timers-tog[0-1]|pwm-(oen(a|b)|tu)[0-1]).*-cfg$":
    type: object
    description: |
      Config nodes for LSPERIPH1 pinctrl pins.
    patternProperties:
      ".*-(pins|pin)$":
        type: object
        description: >
          Every property will be set to default value unless it is
          specified in DeviceTree for a certain pin.
        properties:
          pins:
            items:
              oneOf:
                - enum: [GPIOA_0, GPIOA_1, GPIOA_2, GPIOA_3,
                         GPIOA_4, GPIOA_5, GPIOA_6, GPIOA_7,
                         GPIOB_0, GPIOB_1, GPIOB_2, GPIOB_3,
                         GPIOB_4, GPIOB_5, GPIOB_6, GPIOB_7,
                         GPIOC_0, GPIOC_1, GPIOC_2, GPIOC_3,
                         GPIOC_4, GPIOC_5, GPIOC_6, GPIOC_7,
                         GPIOD_0, GPIOD_1, GPIOD_2, GPIOD_3,
                         GPIOD_4, GPIOD_5, GPIOD_6, GPIOD_7]
            minItems: 1
            maxItems: 8 # Maximum pins(depends on ss1) number per one config.

          bias-disable:
            $ref: pincfg-node.yaml#/properties/bias-disable
            default: true
          bias-bus-hold:
            $ref: pincfg-node.yaml#/properties/bias-bus-hold
            default: false
          bias-pull-up:
            $ref: pincfg-node.yaml#/properties/bias-pull-up
            default: false
          bias-pull-down:
            $ref: pincfg-node.yaml#/properties/bias-pull-down
            default: false
          drive-open-drain:
            $ref: pincfg-node.yaml#/properties/drive-open-drain
            default: false
          drive-strength:
            $ref: pincfg-node.yaml#/properties/drive-strength
            enum: [0, 2, 4, 6, 8, 10, 12]
            description: 0mA puts the pads in high impedance mode.
            default: 6
          input-enable:
            $ref: pincfg-node.yaml#/properties/input-enable
            description: Enable input on a line
            default: false
          input-disable:
            $ref: pincfg-node.yaml#/properties/input-disable
            description: Disable input on a line
            default: true
          slew-rate:
            $ref: pincfg-node.yaml#/properties/slew-rate
            enum: [0, 3]
            default: 3
            description: |
              0: Lower Slew rate (slower edges)
              3: Higher Slew rate (faster edges)

        additionalProperties: false

  "^all.*":
    type: object
    $ref: pincfg-node.yaml#
    description: |
      Config node for LSPERIPH1 pinctrl group.
    properties:
      groups:
        enum: [all]

      power-source:
        $ref: pincfg-node.yaml#/properties/power-source
        enum: [1800, 3300]
        description: 1800 is for 1.8V mode, 3300 is for 3.3V mode.
        default: 3300

    additionalProperties: false

additionalProperties: false

examples:
  - |
    lsperiph1_pinctrl: lsperiph1-pinctrl {
      compatible = "elvees,mcom03-lsperiph1-pinctrl";
      #address-cells = <0>;
      #size-cells = <0>;
      elvees,urb = <&lsperiph1_urb>;

      i2c1_default_cfg: i2c1-cfg {
        scl-sda-pins {
          pins = "GPIOA_0", "GPIOA_1";
          input-enable;
        };
      };

      i2c2_default_cfg: i2c2-cfg {
        scl-sda-pins {
          pins = "GPIOA_2", "GPIOA_3";
          input-enable;
        };
      };

      i2c3_default_cfg: i2c3-cfg {
        scl-sda-pins {
          pins = "GPIOA_4", "GPIOA_5";
          input-enable;
        };
      };

      i2s0_default_cfg: i2s0-cfg {
        sdi-sclkin-pins {
          pins = "GPIOB_4", "GPIOB_5";
          input-enable;
        };
      };

      uart0_default_cfg: uart0-cfg {
        rx-pin {
          pins = "GPIOB_7";
          bias-bus-hold;
          input-enable;
        };
      };
    };

  - |
    lsperiph0_pinctrl: lsperiph0-pinctrl {
      compatible = "elvees,mcom03-lsperiph0-pinctrl";
      #address-cells = <0>;
      #size-cells = <0>;
      elvees,urb = <&lsperiph0_urb>;

      uart3_default_cfg: uart3-default-cfg {
        tx-pin {
          pins = "GPIOA_1";
          bias-disable;
        };
      };
    };
